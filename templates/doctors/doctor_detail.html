{% extends "base.html" %}
{% load get_item %}
{% block title %Doctors - clinic App{% endblock %}
{% block content %}
<div class="mb-6">
    <h2 class="text-2xl font-bold">Dr. {{ doctor.first_name }} {{ doctor.last_name }}</h2>
    {% if doctor.specialty %}
        <p class="text-gray-600">Specialty: {{ doctor.specialty }}</p>
    {% endif %}
</div>

<h3 class="text-xl font-semibold mb-3">Upcoming Sessions & slots</h3>

<div class="space-y-5">
    {% for session in sessions %}
        <section class="rounded-xl border bg-white p-4 shadow-sm">
            <div class="flex items-center justify-between gap-4">
                <div>
                    <div class="text-sm text-gray-500">{{ session.get_status_display }}</div>
                    <h4 class="font-medium">
                        {{ session.date }} - {{ session.start_time }}-{{ session.end_time }}
                    </h4>
                </div>
            </div>

            <ul class="mt-4 grid gap-2 sm:grid-cols-2 lg:grid-cols-3">
                {% for slot in slots_by_session|get_item:session.id %}
                    <li class="flex items-center justify-between rounded-lg border p-3">
                        <div class="text-sm">
                            <div class="font-medium">{{ slot.slot_start|date:"M d, Y H:i" }}-{{ slot.slot_end|date:"H:i" }}</div>
                            <div class="text-gray-500">Service: {{ slot.service.name }}</div>
                        </div>
                        <a href="{% url 'appointments:book' slot.id %}"
                           class="inline-flex items-center rounded-md bg-sky-600 px-3 py-2 text-white hover:bg-sky-700 text-sm">
                            Book
                        </a>
                    </li>
                {% empty %}
                    <li class="text-gray-500">No available slots.</li>
                {% endfor %}
            </ul>
        </section>
    {% empty %}
        <p class="text-gray-500">No sessions scheduled.</p>
    {% endfor %}
</div>
{% endblock %}